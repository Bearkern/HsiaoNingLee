(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77a37ea0"],{"00b4":function(e,t,c){"use strict";c("ac1f");var n=c("23e7"),o=c("da84"),a=c("c65b"),l=c("e330"),r=c("1626"),s=c("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=o.Error,m=l(/./.test);n({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!r(t))return m(this,e);var c=a(t,this,e);if(null!==c&&!s(c))throw new d("RegExp exec method returned something other than an Object or null");return!!c}})},"33ed":function(e,t,c){},4355:function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),o=function(e){return Object(n["pushScopeId"])("data-v-1fdcb1a3"),e=e(),Object(n["popScopeId"])(),e},a=o((function(){return Object(n["createElementVNode"])("div",{class:"container pt-6 pt-lg-7 mb-4"},[Object(n["createElementVNode"])("h3",null,"收藏畫作須知"),Object(n["createElementVNode"])("ul",null,[Object(n["createElementVNode"])("li",null,"填寫收藏者資料僅做為建檔，通知藝術家畫展資訊使用。"),Object(n["createElementVNode"])("li",null,[Object(n["createTextVNode"])(" 有意收藏畫作者，請直接私訊李曉寧藝術家 "),Object(n["createElementVNode"])("a",{href:"https://www.facebook.com/leehsiaolin",class:"mb-3 me-2 mb-md-0 text-primary text-decoration-none lh-1",target:"_blank"},[Object(n["createElementVNode"])("i",{class:"bi bi-facebook fs-3"})]),Object(n["createTextVNode"])(" 或致電 0935-509498 ")])])],-1)})),l={key:0,class:"container empty-collection mb-4"},r=o((function(){return Object(n["createElementVNode"])("p",{class:"d-inline-block"},"您目前沒有收藏任何畫作",-1)})),s=Object(n["createTextVNode"])("前往收藏"),i=o((function(){return Object(n["createElementVNode"])("div",{class:"bougainvillea mt-4"},null,-1)})),d={key:1,class:"collect-group container row mx-auto"},m={class:"collected-paintings col-lg-8 mb-4"},u=o((function(){return Object(n["createElementVNode"])("h3",null,"已收藏畫作",-1)})),b={class:"table align-middle table-primary"},p=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-folder-x"},null,-1)})),j=[p],O=o((function(){return Object(n["createElementVNode"])("th",null,[Object(n["createTextVNode"])(" 畫作 "),Object(n["createElementVNode"])("span",{class:"d-sm-none"},"資訊"),Object(n["createElementVNode"])("span",{class:"d-none d-sm-inline-block"},"名稱")],-1)})),f=o((function(){return Object(n["createElementVNode"])("th",null,"畫作",-1)})),g=o((function(){return Object(n["createElementVNode"])("th",{class:"table-responsive"},"年份",-1)})),V=o((function(){return Object(n["createElementVNode"])("th",{class:"table-responsive"},"尺寸",-1)})),h=["disabled","onClick"],N={key:0,class:"spinner-border spinner-grow-sm"},v={key:1,class:"bi bi-folder-minus"},E={class:"badge bg-primary"},k={class:"mt-2"},x={class:"mobile-only"},y={class:"table-responsive"},C={class:"table-responsive"},L={class:"col-lg-4 mb-4"},S={class:"collector-info"},w=o((function(){return Object(n["createElementVNode"])("h3",null,"收藏者資訊",-1)})),B={class:"col-12 col-md-4 col-lg-12 mb-2"},$=o((function(){return Object(n["createElementVNode"])("label",{for:"name",class:"form-label"},[Object(n["createTextVNode"])("姓名"),Object(n["createElementVNode"])("span",{class:"text-danger"},"*")],-1)})),T={class:"col-12 col-md-8 col-lg-12 mb-2"},z=o((function(){return Object(n["createElementVNode"])("label",{for:"email",class:"form-label"},[Object(n["createTextVNode"])("Email"),Object(n["createElementVNode"])("span",{class:"text-danger"},"*")],-1)})),F={class:"col-12 col-md-4 col-lg-12 mb-2"},M=o((function(){return Object(n["createElementVNode"])("label",{for:"tel",class:"form-label"},[Object(n["createTextVNode"])("電話"),Object(n["createElementVNode"])("span",{class:"text-danger"},"*")],-1)})),I={class:"col-12 col-md-8 col-lg-12 mb-2"},U=o((function(){return Object(n["createElementVNode"])("label",{for:"address",class:"form-label"},[Object(n["createTextVNode"])("地址"),Object(n["createElementVNode"])("span",{class:"text-danger"},"*")],-1)})),D={class:"mb-2"},_=o((function(){return Object(n["createElementVNode"])("label",{for:"message",class:"form-label"},"備註",-1)})),q={class:"text-end"},R=["disabled"];function J(e,t,c,o,p,J){var P=Object(n["resolveComponent"])("Loading"),X=Object(n["resolveComponent"])("RouterLink"),A=Object(n["resolveComponent"])("Field"),G=Object(n["resolveComponent"])("ErrorMessage"),H=Object(n["resolveComponent"])("Form");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(P,{active:p.isLoading,"z-index":1060},null,8,["active"]),a,p.collections.carts.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",d,[Object(n["createElementVNode"])("div",m,[u,Object(n["createElementVNode"])("table",b,[Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",null,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:t[0]||(t[0]=function(){return J.removeCollections&&J.removeCollections.apply(J,arguments)})},j)]),O,f,g,V])]),Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(p.collections.carts,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger",disabled:p.state.paintingLoading===e.id,onClick:function(t){return J.removeCollection(e.id,e.product.title)}},[p.state.paintingLoading===e.id?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",N)):Object(n["createCommentVNode"])("",!0),p.state.paintingLoading!==e.id?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",v)):Object(n["createCommentVNode"])("",!0)],8,h)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("span",E,Object(n["toDisplayString"])(e.product.category),1),Object(n["createElementVNode"])("h4",k,Object(n["toDisplayString"])(e.product.title),1),Object(n["createElementVNode"])("span",x,Object(n["toDisplayString"])(e.product.size),1)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",{class:"painting-image",style:Object(n["normalizeStyle"])({backgroundImage:"url(".concat(e.product.imageUrl,")")})},null,4)]),Object(n["createElementVNode"])("td",y,Object(n["toDisplayString"])(e.product.year),1),Object(n["createElementVNode"])("td",C,Object(n["toDisplayString"])(e.product.size),1)])})),128))])])]),Object(n["createElementVNode"])("div",L,[Object(n["createElementVNode"])("div",S,[w,Object(n["createVNode"])(H,{ref:"collectionForm",class:"row mb-4",onSubmit:J.sendCollections},{default:Object(n["withCtx"])((function(e){var c=e.errors;return[Object(n["createElementVNode"])("div",B,[$,Object(n["createVNode"])(A,{id:"name",name:"姓名",type:"text",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":c["姓名"]}]),modelValue:p.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return p.form.user.name=e}),placeholder:"請輸入姓名",rules:"required"},null,8,["modelValue","class"]),Object(n["createVNode"])(G,{name:"姓名",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",T,[z,Object(n["createVNode"])(A,{id:"email",name:"email",type:"email",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":c["email"]}]),modelValue:p.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return p.form.user.email=e}),placeholder:"請輸入 Email",rules:"email|required"},null,8,["modelValue","class"]),Object(n["createVNode"])(G,{name:"email",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",F,[M,Object(n["createVNode"])(A,{id:"tel",name:"電話",type:"tel",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":c["電話"]}]),modelValue:p.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return p.form.user.tel=e}),placeholder:"請輸入電話",rules:J.isPhone},null,8,["modelValue","class","rules"]),Object(n["createVNode"])(G,{name:"電話",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",I,[U,Object(n["createVNode"])(A,{id:"address",name:"地址",type:"text",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":c["地址"]}]),modelValue:p.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return p.form.user.address=e}),placeholder:"請輸入地址",rules:"required"},null,8,["modelValue","class"]),Object(n["createVNode"])(G,{name:"地址",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",D,[_,Object(n["createVNode"])(A,{name:"message",id:"message",class:"form-control",modelValue:p.form.message,"onUpdate:modelValue":t[5]||(t[5]=function(e){return p.form.message=e}),cols:"30",rows:"3",as:"textarea"},null,8,["modelValue"])]),Object(n["createElementVNode"])("div",q,[Object(n["createElementVNode"])("button",{type:"submit",class:"btn btn-primary text-white",disabled:!p.collections.carts.length}," 填寫完成 ",8,R)])]})),_:1},8,["onSubmit"])])])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,[r,Object(n["createVNode"])(X,{class:"btn btn-primary text-white",to:"/paintings"},{default:Object(n["withCtx"])((function(){return[s]})),_:1}),i]))],64)}c("99af"),c("ac1f"),c("00b4");var P=c("3e94"),X={data:function(){return{isLoading:!1,paintings:[],painting:{},collections:{carts:[]},state:{paintingLoading:""},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCollections:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/cart")).then((function(t){e.collections=t.data.data,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},removeCollection:function(e,t){var c=this;this.state.paintingLoading=e,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/cart/").concat(e)).then((function(e){c.state.paintingLoading="",c.getCollections(),P["a"].emit("get-collection"),c.$httpMessageState(e,"移除",t)})).catch((function(e){c.state.paintingLoading="",c.$httpMessageState(e.response,"移除",t)}))},removeCollections:function(){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/carts")).then((function(t){e.getCollections(),e.isLoading=!1,P["a"].emit("get-collection"),e.$httpMessageState(t,"清空收藏")})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"清空收藏")}))},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},sendCollections:function(){var e=this;this.isLoading=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("clara-vue3","/order"),{data:this.form}).then((function(t){e.$refs.collectionForm.resetForm(),P["a"].emit("get-collection"),e.$router.push("/checkCollections/".concat(t.data.orderId)),e.isLoading=!1,e.$httpMessageState(t,"送出資料")})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"送出資料")}))}},mounted:function(){this.getCollections()}},A=(c("dedc"),c("6b0d")),G=c.n(A);const H=G()(X,[["render",J],["__scopeId","data-v-1fdcb1a3"]]);t["default"]=H},b0c0:function(e,t,c){var n=c("83ab"),o=c("5e77").EXISTS,a=c("e330"),l=c("9bf2").f,r=Function.prototype,s=a(r.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=a(i.exec),m="name";n&&!o&&l(r,m,{configurable:!0,get:function(){try{return d(i,s(this))[1]}catch(e){return""}}})},dedc:function(e,t,c){"use strict";c("33ed")}}]);
//# sourceMappingURL=chunk-77a37ea0.4267a42e.js.map